<header
  class="fixed top-0 left-0 w-full z-50 transition-all duration-200 ease-in-out"
  [ngClass]="isHeaderScrolled() ? 'bg-bg shadow-sm shadow-bg-darker' : 'bg-transparent border-b border-b-border-darkest'"
>
  <app-container [className]="'flex items-center justify-between py-2.5'">
    <!--============== Mobile Menu Icon ==============-->
    <button
      class="header-menu-action-btn group"
      aria-label="Open Mobile Menu"
      (click)="toggleMobileMenu()"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="25"
        height="25"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="lucide lucide-text-align-justify-icon lucide-text-align-justify group-hover:scale-105 group-hover:text-icon-darker transition-transform duration-200 ease-in-out"
      >
        <path d="M3 5h18" />
        <path d="M3 12h18" />
        <path d="M3 19h18" />
      </svg>
    </button>

    <!--============== Logo ==============-->
    <app-logo [title]="title" />

    <!--============== Desktop Navigation ==============-->
    <app-desktop-menu role="navigation" class="hidden md:flex" />

    <!--============== Header Actions ==============-->
    <ul class="relative flex items-center gap-1.5 md:gap-2">
      <!--============== Search ==============-->
      <li>
        <button
          class="header-search-action-btn group"
          aria-label="Search"
          (click)="windowWidth() > 640 ? toggleDesktopSearch() : toggleMobileSearch()"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="25"
            height="25"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="lucide lucide-search-icon lucide-search group-hover:scale-105 group-hover:text-icon-darker transition-transform duration-200 ease-in-out"
            [ngClass]="isMobileSearchOpen() ? 'rotate-360 stroke-accent' : ''"
          >
            <path d="m21 21-4.34-4.34" />
            <circle cx="11" cy="11" r="8" />
          </svg>
        </button>
      </li>

      <!--============== Wishlist ==============-->
      @if(user()) {
      <li class="hidden sm:flex">
        <button class="header-action-btn group" aria-label="Wishlist">
          <a routerLink="/user/wishlist">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="25"
              height="25"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="lucide lucide-heart-icon lucide-heart group-hover:scale-105 group-hover:text-icon-darker transition-transform duration-200 ease-in-out"
            >
              <path
                d="M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5"
              />
            </svg>
          </a>
        </button>
      </li>
      }

      <!--============== Cart ==============-->
      @if(user()) {
      <li class="hidden sm:flex">
        <button class="header-action-btn group" aria-label="Cart">
          <a routerLink="/user/cart">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="25"
              height="25"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="lucide lucide-shopping-cart-icon lucide-shopping-cart group-hover:scale-105 group-hover:text-icon-darker transition-transform duration-200 ease-in-out"
            >
              <circle cx="8" cy="21" r="1" />
              <circle cx="19" cy="21" r="1" />
              <path
                d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"
              />
            </svg>
          </a>
        </button>
      </li>
      }

      <!--============== Auth ==============-->
      <li>
        <button
          class="header-action-btn group"
          [attr.aria-label]="user() ? 'Authenticated User' : 'Sign In'"
        >
          <!--============== Sign In ==============-->
          @if(!user()) {
          <a routerLink="/auth/login">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="25"
              height="25"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="lucide lucide-log-in-icon lucide-log-in group-hover:scale-105 group-hover:text-icon-darker transition-transform duration-200 ease-in-out"
            >
              <path d="m10 17 5-5-5-5" />
              <path d="M15 12H3" />
              <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4" />
            </svg>
          </a>
          }

          <!--============== User Menu ==============-->
          @else {
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="25"
            height="25"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="lucide lucide-user-round-icon lucide-user-round group-hover:scale-105 group-hover:text-icon-darker transition-transform duration-200 ease-in-out"
            (click)="toggleUserMenu()"
          >
            <circle cx="12" cy="8" r="5" />
            <path d="M20 21a8 8 0 0 0-16 0" />
          </svg>
          }
        </button>
      </li>

      <!--============== User Menu ==============-->
      @if(user()) {
      <app-user-menu
        role="menu"
        [attr.aria-expanded]="!isUserMenuOpen()"
        [isOpen]="isUserMenuOpen()"
        (onClose)="toggleUserMenu()"
      />}
    </ul>
  </app-container>

  <!--============== Overlay ==============-->
  <div
    class="overlay"
    [class.hidden]="!isMobileMenuOpen()"
    [attr.aria-expanded]="isMobileMenuOpen()"
    [attr.aria-hidden]="!isMobileMenuOpen()"
  ></div>

  <!--============== Desktop Search ==============-->
  <app-desktop-search
    role="search"
    [attr.aria-expanded]="!isDesktopMenuOpen()"
    [isOpen]="isDesktopMenuOpen()"
    (onClose)="toggleDesktopSearch()"
  />

  <!--============== Mobile Menu ==============-->
  <app-mobile-menu
    role="menu"
    [attr.aria-expanded]="isMobileMenuOpen()"
    [isOpen]="isMobileMenuOpen()"
    (close)="toggleMobileMenu()"
  />

  <!--============== Mobile Search ==============-->
  <app-mobile-search
    role="searchbox"
    [attr.aria-expanded]="isMobileMenuOpen()"
    [isOpen]="isMobileSearchOpen()"
    (close)="toggleMobileSearch()"
  />
</header>
